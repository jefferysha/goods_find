services:
  app:
    image: ghcr.io/usagi-org/ai-goofish:latest
    container_name: ai-goofish-monitor-app
    pull_policy: always
    init: true
    ports:
      - "8000:8000"
    env_file:
      - .env
    volumes:
      # 核心数据（必须持久化）—— SQLite 数据库包含所有业务数据
      - app-data:/app/data
      # 运行时数据
      - ./config.json:/app/config.json
      - ./prompts:/app/prompts
      - ./images:/app/images
      # 可选（日志和历史 JSONL，丢失不影响业务）
      - ./logs:/app/logs
      - ./jsonl:/app/jsonl
    restart: unless-stopped

volumes:
  app-data:
    driver: local
